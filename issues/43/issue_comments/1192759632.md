---
author_association: OWNER
created_at: '2022-07-22T16:47:33Z'
html_url: https://github.com/ima1zumi/stunning-bassoon/issues/43#issuecomment-1192759632
id: 1192759632
issue_url: https://api.github.com/repos/ima1zumi/stunning-bassoon/issues/43
node_id: IC_kwDOHe_Pp85HGBFQ
performed_via_github_app: 
reactions:
  "+1": 0
  "-1": 0
  confused: 0
  eyes: 0
  heart: 0
  hooray: 0
  laugh: 0
  rocket: 0
  total_count: 0
  url: https://api.github.com/repos/ima1zumi/stunning-bassoon/issues/comments/1192759632/reactions
updated_at: '2022-07-22T16:47:33Z'
url: https://api.github.com/repos/ima1zumi/stunning-bassoon/issues/comments/1192759632
user:
  avatar_url: https://avatars.githubusercontent.com/u/52617472?v=4
  events_url: https://api.github.com/users/ima1zumi/events{/privacy}
  followers_url: https://api.github.com/users/ima1zumi/followers
  following_url: https://api.github.com/users/ima1zumi/following{/other_user}
  gists_url: https://api.github.com/users/ima1zumi/gists{/gist_id}
  gravatar_id: ''
  html_url: https://github.com/ima1zumi
  id: 52617472
  login: ima1zumi
  node_id: MDQ6VXNlcjUyNjE3NDcy
  organizations_url: https://api.github.com/users/ima1zumi/orgs
  received_events_url: https://api.github.com/users/ima1zumi/received_events
  repos_url: https://api.github.com/users/ima1zumi/repos
  site_admin: false
  starred_url: https://api.github.com/users/ima1zumi/starred{/owner}{/repo}
  subscriptions_url: https://api.github.com/users/ima1zumi/subscriptions
  type: User
  url: https://api.github.com/users/ima1zumi

---
- shellgei 2.2b
    - mac に pstree ないし入れても -T オプション見つけられなかったから読んだだけ
- [extension.ja - RDoc Documentation](https://docs.ruby-lang.org/en/3.1/extension_ja_rdoc.html)
    - > ruby.hではTYPE()というマクロが定義されていて，VALUEのデータ タイプを知ることが出来ます．TYPE()マクロは上で紹介したT_XXXX の形式の定数を返します．VALUEのデータタイプに応じて処理する 場合には，TYPE()の値で分岐することになります．
    - > char* を取り出す場合， StringValue() と StringValuePtr() を使います． StringValue(var) は var が [String](https://docs.ruby-lang.org/en/3.1/String.html) であれば何もせず，そうでなければ var を var.to_str() の結果 に置き換えるマクロ，[String](https://docs.ruby-lang.org/en/3.1/String.html)ValuePtr(var) は同様に var を [String](https://docs.ruby-lang.org/en/3.1/String.html) に置き換えてから var のバイト列表現に対する char* を 返すマクロです．var の内容を直接置き換える処理が入るので， var は lvalue である必要があります． また，StringValuePtr() に類似した StringValueCStr() というマ クロもあります．StringValueCStr(var) は var を String に置き 換えてから var の文字列表現に対する char* を返します．返され る文字列の末尾には NUL 文字が付加されます．なお，途中に NUL 文字が含まれる場合は [ArgumentError](https://docs.ruby-lang.org/en/3.1/ArgumentError.html) が発生します． 一方，StringValuePtr() では，末尾に NUL 文字がある保証はなく， 途中に NUL 文字が含まれている可能性もあります．
    - [extension.ja - RDoc Documentation](https://docs.ruby-lang.org/en/3.1/extension_ja_rdoc.html#label-E6-96-87-E5-AD-97-E5-88-97-E3-81-AB-E5-AF-BE-E3-81-99-E3-82-8B-E9-96-A2-E6-95-B0)
        - 文字列操作関数の一覧
    - > Rubyのプログラムをevalする
CからRubyの機能を呼び出すもっとも簡単な方法として，文字列で 与えられたRubyのプログラムを評価する以下の関数があります．
VALUE rb_eval_string(const char *str)

次: string.c の関数を呼び出せるようにしたい